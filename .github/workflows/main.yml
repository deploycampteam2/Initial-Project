name: Test Self-Hosted Runner Ubuntu 16.04

on: [push]

jobs:
  test:
    runs-on: self-hosted
    steps:
      - name: Basic system info
        run: |
          echo "ğŸ¯ === RUNNER TEST BERHASIL ==="
          echo "ğŸ“… Date: $(date)"
          echo "ğŸ‘¤ User: $(whoami)"
          echo "ğŸ–¥ï¸ Hostname: $(hostname)"
          echo "ğŸ“‚ Working Directory: $(pwd)"
          echo "ğŸ§ OS Info: $(cat /etc/os-release | head -2)"
          echo "ğŸ’¾ Memory: $(free -h | head -2)"
          echo "ğŸ’½ Disk: $(df -h / | tail -1)"
          
      - name: Manual git clone
        run: |
          echo "ğŸ“¥ Cloning repository..."
          cd /tmp
          rm -rf repo-test
          git clone https://github.com/$GITHUB_REPOSITORY.git repo-test
          cd repo-test
          echo "âœ… Repository cloned successfully!"
          echo "ğŸ“‹ Files in repo:"
          ls -la
          
      - name: Deploy simulation
        run: |
          echo "ğŸš€ === DEPLOYMENT SIMULATION ==="
          echo "ğŸ”„ Updating application..."
          sleep 2
          echo "ğŸ“¦ Installing dependencies..."
          sleep 1  
          echo "ğŸ—ï¸ Building application..."
          sleep 2
          echo "ğŸ‰ Deployment completed successfully!"
          echo "ğŸŒ Application ready at: http://$(hostname -I | awk '{print $1}'):3000"