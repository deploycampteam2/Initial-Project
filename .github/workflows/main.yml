name: Test Self-Hosted Runner Ubuntu 16.04

on: [push]

jobs:
  test:
    runs-on: self-hosted
    steps:
      - name: Basic system info
        run: |
          echo "🎯 === RUNNER TEST BERHASIL ==="
          echo "📅 Date: $(date)"
          echo "👤 User: $(whoami)"
          echo "🖥️ Hostname: $(hostname)"
          echo "📂 Working Directory: $(pwd)"
          echo "🐧 OS Info: $(cat /etc/os-release | head -2)"
          echo "💾 Memory: $(free -h | head -2)"
          echo "💽 Disk: $(df -h / | tail -1)"
          
      - name: Manual git clone
        run: |
          echo "📥 Cloning repository..."
          cd /tmp
          rm -rf repo-test
          git clone https://github.com/$GITHUB_REPOSITORY.git repo-test
          cd repo-test
          echo "✅ Repository cloned successfully!"
          echo "📋 Files in repo:"
          ls -la
          
      - name: Deploy simulation
        run: |
          echo "🚀 === DEPLOYMENT SIMULATION ==="
          echo "🔄 Updating application..."
          sleep 2
          echo "📦 Installing dependencies..."
          sleep 1  
          echo "🏗️ Building application..."
          sleep 2
          echo "🎉 Deployment completed successfully!"
          echo "🌐 Application ready at: http://$(hostname -I | awk '{print $1}'):3000"